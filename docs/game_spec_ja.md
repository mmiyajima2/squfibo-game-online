# ゲーム仕様（v20260126-final）

## タイトル（仮）
**SquFibo（すくふぃぼ）**

---

## コンセプト（絶対にブラさない）

- 誰に対して？
  - 小学生の「考える力」を育てたいと考える保護者・教育関係者に対して

- どんな価値?
  - 暗算力や知識量では測れない
「気づく力・盤面全体を見る力」を、
遊びの中で自然に引き出す学習体験

- 方法
  - 金なし・広告のみのブラウザ対戦ゲーム
  - 時間・ルールが直感的
  - 勝敗より「気づけた瞬間」が楽しい設計

---

## 対象
- 小学生向け
- 2人対戦
- ブラウザゲーム  
  （物理ボードゲームにも転用可能）

---

## 使用要素
- 数字カード
  - 赤1 × 4、青1 × 4  
  - 赤4 × 4、青4 × 4  
  - 赤9 × 9、青9 × 9 
  - 赤16 × 4、青16 × 4 
- 山札（デッキ）
- 星（得点トークン）
  - 合計21個
- 盤面：3 × 3（固定）

---

## 盤面
- 3×3 のマスからなるボード
- 各マスにはカードを1枚まで配置できる
- 盤面は全プレイヤーで共有する

---

## ゲーム開始時
1. 数字カードをすべてシャッフルする
2. 各プレイヤーに手札を8枚配る
3. 残りのカードを山札（デッキ）とする
4. 星（21個）をすべて場に用意する
5. 星は全員 0 個から開始する

---

## ターンの流れ
1. **自分のターン開始時**、盤面がすべて埋まっている場合  
   → 好きなマスのカードを1枚選び、捨て札にする  
   （この処理では役は成立しない）
2. 手札からカードを1枚選び、盤面の空いているマスに配置する  
   - 手札が0枚の場合は、山札の一番上のカードを1枚引き、  
     そのカードをそのまま配置する
3. **今回置いたカードを必ず含む役が成立していれば、1つだけ申告できる**
4. 役が正しければ、以下を順に処理する  
   1. 役に使ったカードをすべて盤面から除去し、捨て札にする  
   2. 除去したカードの枚数だけ、山札からカードを引く  
      （途中で山札が0枚になっても、引ける分までは引く）  
   3. 除去したカードの枚数だけ、星を獲得する  
      （途中で星が0個になっても、成立分はすべて獲得する）
5. 役を申告しない、または成立していなければ、そのまま手番終了

※ 役の自動判定は行わない  
※ 気づいたプレイヤーだけが申告できる  
※ 1ターンに解決できる役は1つのみ

---

## 役について
- 役とは「盤面上の複数枚のカードの組み合わせ」
- 必ず「今回置いたカード」を含むこと
- 役に使ったカードはすべて盤面から除去される
- **役は同色のカードのみで成立する**
- **役のカードは盤面上で隣接している必要がある**
  - 隣接とは、縦または横に隣り合っているマスのこと
  - 斜めは隣接とみなさない

### 役の種類

#### 大役
- **1 + 4 + 16**
  - 3枚除去 / 3枚ドロー / 星3個
  - 配置形状：縦に3枚連なる、横に3枚連なる、またはL字型に連なる
  - L字型とは、3枚が縦横に連なり、曲がり角を持つ形状のこと

#### 大役の考え方
- 和がフィボナッチ数になること
- 3個のカードで構成されること
- 構成する数字が全て異なること
- 同じ色であること
- 構成するカードは面で接している塊であること

#### 小役
- **同じ数字・同じ色の3枚からなるカード**
  - 3枚除去 / 1枚ドロー / 星1個
  - 配置形状：縦に3枚連なる、横に3枚連なる、またはL字型に連なる
  - L字型とは、3枚が縦横に連なり、曲がり角を持つ形状のこと

#### 小役の考え方
- 同じ数字・同じ色の3枚の連なり、という見た目上最もわかりやすい構成
- しかし、大役にくらべ見返りは少ない

---

## 手札ルール
- 手札が多いほど、選択肢が増え有利になる
- 手札が0枚になっても脱落しない
- 手札0枚の場合：
  - 次の自分のターンで山札の一番上のカードを1枚引く
  - そのカードしか使えない（選択不可）

---

## 盤面満杯時のルール
- 盤面がすべて埋まった状態で自分のターンが来た場合、  
  **必ず先に盤面上のカードを1枚捨ててから配置を行う**
- 捨てるカードはどのマスのものでもよい
- この捨て札によって、役の成立や星の獲得は発生しない

※ 盤面をいっぱいにしたまま相手にターンを回すと、  
　相手に「好きなカードを捨てる権利」を与えることになる

---

## ゲーム終了条件と処理順（重要）
- ゲーム終了条件は以下のいずれか：
  1. 場に用意された星がすべて獲得されたとき
  2. 山札（デッキ）が0枚になったとき

### 終了判定のタイミング
- **役の処理（除去・ドロー・星の獲得）は必ず最後まで行う**
- そのターンのすべての処理が完了した後に、  
  ゲーム終了条件を判定する
- 途中でデッキや星が0枚／0個になっても、  
  その役は完全に解決される

---

## 勝敗判定
- ゲーム終了時、各プレイヤーの星の数を比較する
- 星が最も多いプレイヤーが勝者
- 同点の場合は引き分け  
  （または追加ルールで決定してもよい）

---

## ゲームの特徴
- 暗算力よりも「盤面全体を見渡して気づく力」を重視
- 脱落や強い罰のない設計
- 気づけた回数・早さが自然にスコア差として表れる
- 盤面をどう相手に渡すか、という読み合いが生まれる
- デジタル／物理の両方で成立するルール
